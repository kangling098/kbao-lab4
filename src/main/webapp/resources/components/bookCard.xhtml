<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:composition>
        <ui:param name="book" value="#{null}" />
        
        <div class="card book-card" style="width: 18rem; margin: 10px;">
            <div class="card-body">
                <h5 class="card-title">#{book.title}</h5>
                <h6 class="card-subtitle mb-2 text-muted">#{book.author}</h6>
                <p class="card-text">
                    <strong>ISBN:</strong> #{book.isbn}<br/>
                    <strong>Publication Date:</strong> 
                    <h:outputText value="#{book.publicationDate}">
                        <f:convertDateTime pattern="MM/dd/yyyy" />
                    </h:outputText><br/>
                    <strong>Price:</strong> $#{book.price}<br/>
                    <strong>Status:</strong> 
                    <span class="badge #{book.isAvailable ? 'bg-success' : 'bg-warning'}">
                        #{book.isAvailable ? 'Available' : 'Checked Out'}
                    </span>
                </p>
                
                <ui:fragment rendered="#{not empty bookController}">
                    <h:commandButton value="View Details" 
                                     action="#{bookController.viewBook(book.id)}"
                                     styleClass="btn btn-outline-primary btn-sm"
                                     immediate="true"/>
                    <h:commandButton value="Edit" 
                                     action="#{bookController.editBook(book.id)}"
                                     styleClass="btn btn-outline-secondary btn-sm ms-1"
                                     rendered="#{loginController.hasRole('ADMIN') or loginController.hasRole('LIBRARIAN')}"
                                     immediate="true"/>
                    <h:commandButton value="Delete" 
                                     action="#{bookController.deleteBook(book.id)}"
                                     styleClass="btn btn-outline-danger btn-sm ms-1"
                                     rendered="#{loginController.hasRole('ADMIN') or loginController.hasRole('LIBRARIAN')}"
                                     immediate="true"
                                     onclick="return confirm('Are you sure you want to delete this book?');"/>
                </ui:fragment>
            </div>
        </div>
    </ui:composition>
</html>